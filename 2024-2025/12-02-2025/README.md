# –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ß—Ç–æ —Ç–∞–∫–æ–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã?
–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–ø–∏—Å—ã–≤–∞–µ—Ç —ç—Ç–∞–ø—ã, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ—Ç –º–æ–º–µ–Ω—Ç–∞ e—ë —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ DOM-–¥–µ—Ä–µ–≤–∞.

–û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞:
- *Component did mount* - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ—Ç—Ä–∏—Å–æ–≤–∞–ª–∞—Å—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ 
- *Component did update* - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- *Component will unmount* - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–º–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã


## –ü—Ä–æ—Å—Ç–∞—è —Å—Ö–µ–º–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
<img src="./lifeCycleScheme.png" width="500">

## Component did mount
–ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –û—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞–Ω–Ω—ã–º–∏. –ú–æ–∂–Ω–æ –∫ —ç—Ç–æ–º—É —ç—Ç–∞–ø—É –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø—Ä–∏–≤—è–∑–∞—Ç—å –ø–µ—Ä–≤–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –∞–ø–∏ –∏–ª–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ ```localStorage```.

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å ```component did mount``` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å hook –∏–∑ React ```useEffect``` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º –≤–æ –≤—Ç–æ—Ä–æ–º –∞—Ä–≥—É–º–µ–Ω—Ç–µ. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç:

```jsx
import React, { useEffect } from "React";

function WeatherWidget() {
    // –†–∞–±–æ—Ç–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –æ–ø–∏—Å–∞–Ω–∞ –≤ 29-01-2025
    const [weatherValue, setWeatherValue] = useState();

    // –í—ã–∑—ã–≤–∞–µ–º useEffect
    // –≤ –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫
    // –≤–æ –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
    // –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ useEffect –≤—ã–∑–æ–≤–µ—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç component did mount
    useEffect(function() { // <~~~~ –ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
        fetch("https://weather.api.com/spb/") // –¢–∞–∫–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —è –µ–≥–æ –≤—ã–¥—É–º–∞–ª üëÄ
            .then(function(response) { 
                return response.json() 
            })
            .then(function(data) {
                setWeatherValue(data);
            });
    }, []); // <~~~~ –í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç —ç—Ç–æ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

    return (
        <div className="weatherWidget">
            <p className="weatherValue">{weatherValue}</p>
        </div>
    );
}

export default WeatherWidget;
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ—Ç—Ä–∏—Å—É–µ—Ç—Å—è –ø—É—Å—Ç–æ–π, –Ω–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–≤–æ–µ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –≤—ã–∑–æ–≤–µ—Ç—Å—è ```useEffect```, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –∞–ø–∏ –ø–æ–≥–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –≤–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é –ø–æ–≥–æ–¥—É.

–ï—â–µ –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä, –±—É–¥–µ–º –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–∞–π–º–µ—Ä –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

```jsx
import React, { useEffect } from "React";

function TimerComponent() {
    const [timer, setTimer] = useState();

    useEffect(function() {
        setInterval(function() {
            setTimer(function(value) { // <~~~~ value - —ç—Ç–æ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                return value + 1; // <~~~~ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            })
        }, 1000);
    }, []);

    return (
        <div className="timerBlock">
            <p className="timer">{timer}</p>
        </div>
    );
}

export default TimerComponent;
```

## Compoentn did update
–≠—Ç–∞–ø –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ ```component did update``` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:
- –°—Ä–∞–∑—É –ø–æ—Å–ª–µ ```component did mount```
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö ```props``` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ü—Ä–∏–º–µ—Ä "–í–∏—Ä–∞—Ç—É–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞"

```Component did update``` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ```props``` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```jsx
import React, { useEffect, useState } from "react";

const RUS_LETTERS = [
    ["–π", "—Ü", "—É", "–∫", "–µ", "–Ω", "–≥", "—à", "—â", "–∑", "—Ö", "—ä"],
    ["—Ñ", "—ã", "–≤", "–∞", "–ø", "—Ä", "–æ", "–ª", "–¥", "–∂", "—ç"],
    ["—è", "—á", "—Å", "–º", "–∏", "—Ç", "—å", "–±", "—é"]
];

const ENG_LETTERS = [
    ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p"],
    ["a", "s", "d", "f", "g", "h", "j", "k", "l"],
    ["z", "x", "c", "v", "b", "n", "m"]
];

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
// –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ –µ–π –ø–µ—Ä–µ–¥–∞–¥—É—Ç 
// –±—É–∫–≤—ã —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ "letters"
function VirtualKeyboard(props) {
    // –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ letters –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è
    // –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å component did update
    // –∏ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è useEffect –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –Ω–∏–∂–µ
    useEffect(function() {
        console.log('Letters updated!');
    }, [props.letters]) // <~~~ –ú–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–ª–µ–¥–∏—Ç –∑–∞ letters

    return (
        <div className="keyboardLayout">
            {props.letters.map((row, i) => 
                <div className="keyboardRow" key={i}>
                    {row.map((letter) => 
                        <button className="letterKey" key={letter}>
                            {letter}
                        </button>
                    )}
                </div>
            )}
        </div>
    )
}

function Screen() {
    const [keyboardLettesr, setKeyboardLetters] = useState(RUS_LETTERS);

    function changeLang() {
        setKeyboardLetters(function(currentLang) {
            return currentLang === RUS_LETTERS ? ENG_LETTERS : RUS_LETTERS;
        });
    }

    return (
        <div className="screen">
            <button onClick={changeLang}>ru/en</button>

            {/* –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ keyboardLetters, 
                –≤–Ω—É—Ç—Ä–∏ VirtualKeyboard –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å component did update */}
            <VirtualKeyboard letters={keyboardLettesr} />
        </div>
    )
}

export default Screen;
```

### –ü—Ä–∏–º–µ—Ä - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã "—Å–≤–µ—Ç–ª–∞—è/—Ç–µ–º–Ω–∞—è"
```Component did update``` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ```—Å–æ—Å—Ç–æ—è–Ω–∏—è``` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```jsx
import React, { useState, useEffect } from "react";

function ThemeToggler() {
    const [theme, setTheme] = useState("light");

    // –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ 
    // component did update –±—É–¥–µ—Ç 
    // –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∏–∑-–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è 
    // –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    useEffect(function() {
        console.log('THEME CHANGED');
    }, [theme]) // <~~~ –ú–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–ª–µ–¥–∏—Ç –∑–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

    function toggleTheme() {
        setTheme(function(currentTheme) {
            return currentTheme === "light" ? "dark" : "light";
        });
    }

    return (
        <button onClick={toggleTheme}>
            Current theme: {theme}
        </button>
    )
}

export default ThemeToggler;
```

## Component will unmount
```component will unmount``` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–¥ —Å–∞–º—ã–º –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ. –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ ```useEffect``` –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –∏ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è ```component will unmount```


### –ü—Ä–∏–º–µ—Ä –ø–æ—è–≤–ª–µ–Ω–∏–µ/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ Loader

```jsx
import React, { useState, useEffect } from "react";

function Loader() {
    useEffect(function() {
        console.log("LOADER MOUNTED");

        return function() { // <~~~ Component will unmount
            console.log("UNMOUNTING");
        }
    }, [])

    return (
        <div className="awesomeLoader"></div>
    )
}

function TodoList() {
    const [loading, setLoading] = useState(true);

    useEffect(function() {
        setTimeout(function() {
            // –û—Ç–∫–ª—é—á–∞–µ–º Loader
            // –î–ª—è Loader —Å—Ä–∞–±–æ—Ç–∞–µ—Ç Component will unmount
            setLoading(false); 
        }, 1000)
    }, [])

    return (
        <div>
            {loading && <Loader />}
        </div>
    )
}

export default TodoList;
```

# –ü–∞–º—è—Ç–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```jsx
// –ü–µ—Ä–≤–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
// Component did mount
useEffect(function() {

}, []) // <~~~ –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π


// –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
// Component did update
useEffect(function() {

}, [anyProps, anyState]) // <~~~ –ú–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∑–∞–ø–æ–ª–Ω–µ–Ω —Ç–µ–º—ã
                         // —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ 
                         // –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å Component did update


// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
// Component will unmount
useEffect(function() {
    return function() { // <~~~ –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑–æ–≤–µ—Ç—Å—è 
                        // –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    }
}, []) // <~~~ –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π


// useEffect –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–æ—Ç—å —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```
